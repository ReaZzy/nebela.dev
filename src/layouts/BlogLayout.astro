---
import Layout from "@/layouts/Layout.astro";
import Header from "@/components/Header.astro";
import AsciiImage from "@/components/ascii/ascii-image";
import { formatDate } from "@/utils/format-date";

interface Props {
  title: string;
  description?: string;
  publishedAt?: Date;
  updatedAt?: Date;
}

const { title, description, publishedAt, updatedAt } = Astro.props;
---

<Layout title={`${title} | blog`} description={description}>
  <AsciiImage
    client:idle
    path="/ascii-flower-3.txt"
    preset="no-flicker"
    className="justify-end bg-clip-text text-transparent bg-linear-(--green-gradient) fixed inset-0 z-0"
  />

  <div class="relative z-10 min-h-screen flex flex-col">
    <Header currentPage="blog" />

    <main class="w-full max-w-4xl mx-auto px-4 py-8 flex-1">
      <article class="prose" itemscope itemtype="https://schema.org/BlogPosting">
        <header class="mb-8">
          <h1 itemprop="headline">{title}</h1>
          {
            publishedAt && (
              <div class="flex gap-4 text-zinc-400 text-base mt-2">
                <time datetime={publishedAt.toISOString()} itemprop="datePublished">
                  {formatDate(publishedAt)}
                </time>
                {updatedAt && (
                  <time datetime={updatedAt.toISOString()} itemprop="dateModified">
                    (updated: {formatDate(updatedAt)})
                  </time>
                )}
              </div>
            )
          }
        </header>

        <div itemprop="articleBody">
          <slot />
        </div>
      </article>
    </main>

    <footer class="w-full max-w-4xl mx-auto px-4 pb-8">
      <nav class="flex gap-4 font-mono text-base text-zinc-400" aria-label="Post navigation">
        <a href="/blog" class="hover:text-green-400 active:text-green-400 transition-colors"
          >&larr; back to blog</a
        >
      </nav>
    </footer>
  </div>
</Layout>
